# Vertex 控制台布局与样式重构方案

版本：v0.1（草案）  
作者：Cascade 协作  
日期：2025-11-21

---

## 1. 背景与目标

- **背景**：现有站点的模块导航位于顶部，随着模块增加（知识库、文件库、后台管理……）会出现拥挤与视觉割裂的问题；同时用户希望界面更精美并具备深色侧栏 + 浅色内容、偏暖色调的阳光风格。
- **目标**：
  1. 搭建可扩展的 App Shell，统一 Desktop 与 Mobile 的布局骨架；
  2. 为后台管理模块新增“重建文档索引”入口与交互；
  3. 输出可落地的色彩、组件、间距、交互规范，指导后续开发。

---

## 2. App Shell 信息架构

```
┌──────────────────────────────────────────┐
│ 顶部工作栏：Logo / 模块名称 + 面包屑 / 搜索 / 快捷操作 / 头像 │
├───────────────┬─────────────────────────────────────┤
│ 左侧模块栏    │ 右侧内容区（由各模块 RouterView 承载）       │
│ （一级导航）  │  - 模块内二级导航 / Tab / 子侧栏              │
│               │  - 工具栏（过滤、批量、操作按钮）             │
│               │  - 主视图区（列表 / 网格 / 编辑器 / 详情）    │
└───────────────┴─────────────────────────────────────┘
```

- **左侧模块栏**：承载一级模块切换（知识库 / 文件库 / 后台管理 / …）；可折叠，仅 icon；底部独立放置设置、主题、反馈。
- **顶部工作栏**：仅保留品牌、当前上下文、全局搜索与用户/系统操作，不再放一级模块按钮。
- **内容区**：通过 slot + 路由组合，实现模块化二级导航、工具栏与视图区；支持骨架屏与空态组件复用。

---

## 3. 布局与响应式策略

| 断点 | 行为 |
| --- | --- |
| ≥ 768px (桌面) | 左侧模块栏展开（96px），内容区三栏（可选二级侧栏）；顶部显示完整搜索框与文案。 |
| < 768px (移动) | 顶部简化为“三明治按钮 + Logo + 用户动作”；左侧模块栏收起为抽屉，由汉堡按钮唤起；底部可提供 3–4 个主模块 Tab。 |

> 注：项目已分为 Web / Mobile 两套实现，此方案作为统一视觉规范。移动端遵循同一配色和组件语言。

---

## 4. 视觉与主题设定

### 4.1 色彩（暖色阳光风格）

| 类型 | Token | Light 值 | Dark 值 | 说明 |
| --- | --- | --- | --- | --- |
| 品牌主色 | `--color-brand` | `#F28F3B` | `#FFB35C` | 阳光橙，突出互动控件 |
| 强调色 | `--color-accent` | `#F7B267` | `#FFC482` | 次级按钮 / Tag |
| 背景（内容） | `--surface-main` | `#FDF8F1` | `#1E1B24` | 轻暖米色 / 深灰紫 |
| 背景（模块栏） | `--surface-shell` | `#241C2A` | `#150F1A` | 深色渐层，承载 icon |
| 文本主色 | `--text-primary` | `#2F1B0C` | `#FDF5EC` | 深棕 / 米白 |
| 文本次色 | `--text-secondary` | `#6B4E3D` | `#DCC0AD` | 标签、描述 |
| 边界/描边 | `--border-soft` | `rgba(47,27,12,0.08)` | `rgba(253,245,236,0.1)` | 卡片分隔 |
| 状态成功 | `--color-success` | `#50C878` | `#4DD88A` | Toast/标签 |
| 状态警告 | `--color-warning` | `#FFCF56` | `#FFD979` | |
| 状态危险 | `--color-danger` | `#D7263D` | `#FF6B6B` | 用于删除确认 |

> 实现建议：在 `src/styles/tokens.css` 中新增 `app-shell` 专区，并提供 `data-theme="light"/"dark"` 两套值。

### 4.2 排版与圆角

- 字体：`"SF Pro Display", "MiSans", "Inter", -apple-system, BlinkMacSystemFont`；
- 标题：`H1 30px/40`、`H2 24/32`、`H3 20/28`；正文 `16/24`，辅助文案 `14/22`；
- 圆角：卡片 20px，输入控件 12px，按钮 999px（Pill）；
- 阴影：
  - 浅色：`0 20px 45px rgba(242,143,59,0.08)`
  - 深色：`0 12px 30px rgba(0,0,0,0.45)`

---

## 5. 导航与交互细则

### 5.1 左侧模块栏（一级）

- 宽度 96px，背景采用 `linear-gradient(180deg, #2D2035 0%, #1A131F 100%)`；
- icon 24px + 文本 12px（折叠后仅 icon，气泡提示模块名）；
- 当前模块：加入发光分隔条（4px）+ 半透明高亮背景；
- 底部区：包含主题切换、反馈、设置图标，使用细分割线与主体区隔。

### 5.2 顶部工作栏

- 高度 72px，背景 `rgba(255,255,255,0.85)`（浅色）/ `rgba(21,15,26,0.85)`（深色），附加毛玻璃效果；
- 面包屑：`知识库 / 空间 A / 文档 X`，支持下拉切换；
- 搜索框：圆角 Pill，内置快捷键提示（`⌘K` / `Ctrl K`）；
- 快捷操作：
  1. 「＋」浮动菜单（新建文档/上传/新建空间）；
  2. 「同步」或「刷新」按钮；
  3. 通知铃铛；
  4. 用户头像（打开帐号菜单）。

### 5.3 模块内二级导航

- Desktop：根据模块类型在内容区内使用 Tab + 子侧栏组合；
- Mobile：Tab 采用水平滑动，保留“更多”菜单收纳低频页面；
- 二级导航组件统一样式（胶囊形 Tabs，选中项填充 `--color-brand`，未选项半透明描边）。

---

## 6. 模块级设计重点

### 6.1 知识库

- 左子侧栏：文档树（可折叠、分组、搜索）；
- 右内容区：工具栏（过滤 / 排序 / 视图切换） + 文档列表 / 编辑器；
- 空态：暖色插画 + CTA（“创建第一篇文档”）。

### 6.2 文件库

- 布局与知识库相似，但子侧栏切换为目录/标签；
- 内容区提供列表/卡片切换，卡片强调缩略图与文件类型；
- 回收站采用灰度色系，避免和正常态混淆。

### 6.3 后台管理（新增）

- 二级导航：`总览 / 用户 / 角色 / 权限点 / 系统设置 / 日志`；
- 卡片采用网格分布，展示 KPI 与快捷入口；
- **重建文档索引**：
  - 位置：后台管理 → 系统设置 → 搜索服务卡片；
  - 内容：指标（索引文档总数、最后一次重建时间、耗时、状态）；
  - 操作按钮 `重建文档索引`（主按钮，使用品牌色），点击后：
    1. 二次确认对话框，说明操作耗时与影响；
    2. 确认后触发 API（`POST /admin/indexes/rebuild` 示例），顶部显示进度 Toast 或侧边状态条；
    3. 完成后刷新 KPI，若失败显示 error badge + 重试。

---

## 7. 组件与样式指引

| 组件 | 指南 |
| --- | --- |
| `AppShell` | 拆分为 `ShellAside`、`ShellHeader`、`ShellMain`，通过具名 slot 注入模块内容；支持 `data-theme`、`sidebar-collapsed` 属性调节。 |
| `ModuleNavItem` | 接受 `icon`, `label`, `badge`, `active`，默认 64px 高，hover 带渐变光晕。 |
| `ModuleBreadcrumb` | 面包屑统一使用 14px 字号 + 暖棕文字；支持“下拉选择空间/目录”。 |
| `ActionButton` | 主按钮（品牌色填充 + 白字）；次按钮（描边 + 半透明背景）；危险按钮使用 `--color-danger`。 |
| `Card` | 背景纯色 + 20px 圆角 + 柔和阴影；顶部可以加淡淡的渐变条增强层次。 |
| `Dialog` | 居中、背景虚化；按钮对齐右侧；移动端改为底部抽屉。 |

CSS 建议：

```css
:root[data-theme="light"] {
  --shell-width: 96px;
  --header-height: 72px;
  --radius-card: 20px;
  --layout-padding: 24px;
}

:root[data-theme="dark"] {
  /* 同名变量给出暗色值 */
}
```

---

## 8. 状态、反馈与动画

- Toast：暖色渐变背景 + icon（成功/警告/错误）；默认 3 秒；
- Loading：顶部线性进度条 + 全局淡入遮罩（用于长耗时，如索引重建）；
- 骨架屏：使用柔和杏色 `rgba(242,143,59,0.12)`；
- 交互动效：
  - 导航 hover 150ms ease；
  - 侧栏展开/折叠 240ms cubic-bezier(0.4, 0.0, 0.2, 1)；
  - Dialog 背景淡入 + 内容向上浮现。

---

## 9. 实施建议（阶段拆解）

1. **App Shell 重构**（1 sprint）
   - 新建 `AppShell` 组件与 CSS 变量；
   - 将 `MainLayout.vue` 替换为“左侧模块栏 + 顶部栏 + 内容槽位”结构；
   - 统一 Desktop/Mobile 的响应式断点逻辑。
2. **模块适配**（1–2 sprint）
   - 知识库 / 文件库组件迁移到新 Shell；
   - 调整二级导航、工具栏与空态。
3. **后台管理增强**（1 sprint）
   - 新增系统设置卡片 & 重建索引流程；
   - 接入后台 API，补充状态反馈。
4. **视觉打磨 & 主题切换**（持续）
   - 补充图标、插画、动画；
   - 构建 Storybook/组件 Demo 以便验证样式。

---

## 10. 附录：命名与文件结构建议

```
src/
  blog/
    layouts/
      AppShell.vue        // 新统一布局
    components/
      shell/
        ShellAside.vue
        ShellHeader.vue
        ModuleNavItem.vue
      navigation/
        ModuleTabs.vue
        Breadcrumb.vue
      admin/
        IndexRebuildCard.vue
```

- Token 文件：`src/styles/tokens.css` → `src/styles/themes/app-shell.css` 分层管理；
- 主题切换：沿用 Pinia `uiStore.theme`，新增对模块栏/内容区的局部 class。

---

> 本文档可作为后续实施的蓝图，如需更详细的线框图或组件草图，请告知我进一步细化。
